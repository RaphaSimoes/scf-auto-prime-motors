<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Colaboradores</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>

<body>

<header>
    <div class="titulo">
        <div class="linha-titulo-cima"></div>
        <h1>Auto Prime Motors</h1>
        <div class="linha-titulo-baixo"></div>
    </div>
</header>

<div class="box-sistema">
    <div class="menu-info">
        <button id="btnCadastrar" onclick="abrirFormulario()">Cadastrar</button>
    </div>

    <table id="tabela">
        <thead>
        <tr>
            <th>Nome do Funcionário</th>
            <th>Cargo</th>
            <th>Status</th>
            <th>Ações</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="func : ${listaFuncionarios}">
            <td th:text="${func.nome}">João da Silva</td>
            <td th:text="${func.cargo}">Desenvolvedor</td>
            <td th:text="${func.status}">Ativo</td>
            <td>
                <button class="btn-action"
                        th:onclick="abrirFormularioEdicao(
                            '[[${func.id}]]',
                            '[[${func.nome}]]',
                            '[[${func.genero}]]',
                            '[[${func.cpf}]]',
                            '[[${func.telefone}]]',
                            '[[${func.endereco}]]',
                            '[[${func.cargo}]]',
                            '[[${func.setor}]]',
                            '[[${func.dataAdmissao}]]',
                            '[[${func.salario}]]',
                            '[[${func.status}]]'
                        )">
                    Editar
                </button>

                <form th:action="@{/funcionarios/excluir/{id}(id=${func.id})}" method="post" style="display:inline;">
                    <button type="submit" class="btn-action" style="background:red"
                            onclick="return confirm('Tem certeza que deseja excluir este funcionário?');">
                        Excluir
                    </button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<div id="modal" class="modal">
    <div class="modal-content">
        <h2 id="tituloFormulario">Cadastro de Funcionário</h2>

        <form id="formFuncionario" th:action="@{/funcionarios/salvar}" th:object="${funcionarioForm}" method="post">
            <input type="hidden" id="id" th:field="*{id}">

            <label>Nome:</label>
            <input type="text" id="nome" th:field="*{nome}" required>

            <label>Gênero:</label>
            <input type="text" id="genero" th:field="*{genero}">

            <label>CPF:</label>
            <input type="text" id="cpf" th:field="*{cpf}">

            <label>Telefone:</label>
            <input type="text" id="telefone" th:field="*{telefone}">

            <label>Endereço:</label>
            <input type="text" id="endereco" th:field="*{endereco}">

            <label>Cargo:</label>
            <input type="text" id="cargo" th:field="*{cargo}">

            <label>Setor:</label>
            <input type="text" id="setor" th:field="*{setor}">

            <label>Data de Admissão:</label>
            <input type="date" id="dataAdmissao" th:field="*{dataAdmissao}">

            <label>Salário:</label>
            <input type="text" id="salario" th:field="*{salario}">

            <label>Status:</label>
            <select id="status" th:field="*{status}">
                <option value="Ativo">Ativo</option>
                <option value="Inativo">Inativo</option>
            </select>

            <div class="modal-buttons">
                <button type="submit" class="salvar">Salvar</button>
                <button type="button" class="voltar" onclick="fecharModal()">Cancelar</button>
            </div>
        </form>
    </div>
</div>

<script th:src="@{/js/app.js}"></script>
</body>

</html>